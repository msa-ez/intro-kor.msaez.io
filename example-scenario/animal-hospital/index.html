<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>동물병원 진료시스템 - msaez</title><meta name="gridsome:hash" content="041dc063695500573baa734c9c88d56240206fd1"><meta data-vue-meta="ssr" charset="utf-8"><meta data-vue-meta="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-meta="ssr" key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-meta="ssr" key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/templates-language/springboot-java-template/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/tool/setup-on-prem/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/toppings/test-contract/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/toppings/test-messaging/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/toppings/test-microcks/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/toppings/test-unit/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/tool/si-gpt/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/templates-language/python-template/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/tool/on-prem-inst/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/operation/ops-deploy-diagramming-advanced-hpa/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/operation/ops-deploy-diagramming-advanced-ingress/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/operation/ops-deploy-diagramming-advanced-istio/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/operation/ops-deploy-diagramming-advanced-pvc/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/operation/ops-deploy-diagramming-basic-objects/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/tool/model-driven/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/tool/marketplace/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/tool/k8s-modeling/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/toppings/k8s-kubernetes/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/started/key-features/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/tool/infrastructure-modeling/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/development/understanding-jpa-based-single-microservice/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/templates-language/go-template/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/tool/google-drive-examples/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/custom-template/template-editor-custom-template/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/custom-template/understanding-template-structure/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/tool/event-storming-tool/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/custom-template/unit-test/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/development/token-based-auth/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/started/event-storming-learning/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/custom-template/template-editor/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/custom-template/template-structure/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/custom-template/template-syntax/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/info/partnership/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/info/pricing/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/tool/cloud-ide-tool/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/tool/development-practice/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/toppings/cicd-git-action/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/custom-template/tutorial/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/started/domain-driven/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/tool/chat-gpt/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/toppings/cicd-argo/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/example-scenario/online-lecture/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/tool/attending-lectures/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/development/pub-sub/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/development/pubsub-deadline/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/development/pubsub-idempotency/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/contact/question/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/development/oauth2with-keycloak/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/development/ops-docker/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/development/orchestration-saga/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/development/monolith-2-misvc/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/example-scenario/library-system/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/custom-template/loop-conditional-statement/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/custom-template/mock-server/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/development/kafka-scaling-concurrenty-handling/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/development/kafka-retry-dlq/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/development/kafka-basic/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/development/kafka-connect/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/development/kafka-scaling/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/example-scenario/food-delivery/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/custom-template/global-helper/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/custom-template/helper/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/info/company/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/info/consulting/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/development/gateway/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/custom-template/creating-custom-template-1/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/custom-template/designing-template-helper/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/development/dp-cqrs/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/development/dp-frontend/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/development/dp-graphql/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/business/ddd-google-drive/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/business/eventstorming-fooddelivery/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/custom-template/custom-template/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/development/choreography-saga/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/development/circuit-breaker/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/development/cna-start/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/development/compensation-correlation/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/development/conteact-messaging/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/development/contract-test/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/example-scenario/accommodation-reservation/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/example-scenario/animal-hospital/"><meta data-vue-meta="ssr" name="description" content="undefined"><meta data-vue-meta="ssr" key="og:title" name="og:title" content="동물병원 진료시스템"><meta data-vue-meta="ssr" key="twitter:title" name="twitter:title" content="동물병원 진료시스템"><meta data-vue-meta="ssr" key="og:description" name="og:description" content="undefined"><meta data-vue-meta="ssr" key="twitter:description" name="twitter:description" content="undefined"><meta data-vue-meta="ssr" key="og:type" name="og:type" content="website"><meta data-vue-meta="ssr" key="twitter:card" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" key="og:image" name="og:image" content="undefined/logo.jpg"><meta data-vue-meta="ssr" key="twitter:image" name="twitter:image" content="undefined/logo.jpg"><link data-vue-meta="ssr" rel="icon" href="data:,"><link data-vue-meta="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.2921b393c59c1de81f95c629be62cea9.png"><link data-vue-meta="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.2921b393c59c1de81f95c629be62cea9.png"><link data-vue-meta="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.2921b393c59c1de81f95c629be62cea9.png"><link data-vue-meta="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.2921b393c59c1de81f95c629be62cea9.png"><link data-vue-meta="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon.1539b60.2921b393c59c1de81f95c629be62cea9.png"><link rel="preload" href="/assets/css/0.styles.ea618bb5.css" as="style"><link rel="preload" href="/assets/js/app.2d132dae.js" as="script"><link rel="preload" href="/assets/js/page--src-templates-markdown-page-vue.300acc31.js" as="script"><link rel="prefetch" href="/assets/js/page--src-pages-404-vue.bc61b8cc.js"><link rel="prefetch" href="/assets/js/page--src-pages-index-vue.5535bee0.js"><link rel="prefetch" href="/assets/js/search.c3e29818.js"><link rel="stylesheet" href="/assets/css/0.styles.ea618bb5.css"><noscript data-vue-meta="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div data-server-rendered="true" id="app" class="antialiased text-ui-typo bg-ui-background"><div class="flex flex-col justify-start min-h-screen"><header class="sticky top-0 z-10 w-full border-b bg-ui-background border-ui-border"><div class="py-2 border-t-2 border-ui-primary"><div class="container"><div class="flex items-center justify-between -mx-2 sm:-mx-4 is-not-mobile"><div><a href="/" title="Home" class="flex items-center text-ui-primary active"><img src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 120 64' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-fc641bf75e53d9efc3486e04cdc3cd6a'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-fc641bf75e53d9efc3486e04cdc3cd6a)' width='120' height='64' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAiCAYAAADvVd%2bPAAAACXBIWXMAAC4jAAAuIwF4pT92AAATw0lEQVRo3sVZCVSTZ7pmc6y22vXedqa3iz2dTje7TduZjrZWZQcBIayKC9W6dTrVUVHrUlxwAdmSEAIEJOwoCoosIQkEQVZFFitatYsdtVNHlB2S/3vm/f4kiO3M7b3n3HvMOc95v//Pv%2bR5vnf7vtjY0Kcnz0nE2PFPYGuBnQX2t3MdHURL523uwUcjrbLRyKrtCPYW2NE52wpZtS2N6ftqmwrzNebrZXfGP/tYSIrEevIcOSl789jJjoj%2b4o/pyXWyoXsm/Zjr%2bRzyX39nS1qts6uSLfBJ7g/xUg4GeycPBhECCQEEf4KE4EeY65U86EPW21s54OWlHPD0Th7woGN3Ou82V9nvNitZcEySt4Xppbol5bLqD4ngb4nI/f/d76n4mThV9hVS8dgszqgoZG/n/Q8IEjki%2bBTZN0kgD7pnGY0jaKwilNO4jb6/2p3r2i/k/0GITS/udlMDAZmAnxXquyGxQDzOAHytOHAHfgQPQorqMlpUDdAp6kACDNAP/57QQLOcR3Y3EV5KmEXj35J96Jf4cIHGWk7wEcLrBGfCQiK1qSfXMZHGJWRbyAu%2bJtvTl%2b8E42EXoNgVOOZO8AArdhPPDR50Rk%2b%2bK0z570GdoRp2VMI4N7nPSDNKGDTS7IrWh449Fb1GZ2mPyVnaa3KV9Zi8kvpMdN5E3mKi6wlklQMiPJOHhAPyU6Yqqc5IHiBUyg3QK2phSG5AnaoZJ9NOoTa1CdXKkyABhonUFbJNhINcHMISghPhd4TJd0SovsuFo1mRK/oLnIGjbkTMzWyJnOmIGwYPuaKvwAUkCCMxhJ48Z%2bOtnNnGmxl/Ikwz3s51MtF3QneuCzPm/YmVqyPhrATzSe5jRIgRebKDZPuZo2yAheSArS4BW3sc7JOjYHPTwZxl/XQ9v2ZQvIfIszl07Ev3HJQ1MJ1Uz2j2Gc06IyICETWRNZI1luzXmI5Fa4TyeD2qkupQQ%2bJwUU6qWkikFvEcF4fwN8JZwixLCNiJAhCBv3LSRGKYQIQcjdxykrfUfzL1ZU8TutXTGLk54yLcyv6QDR92Z2jYyFC7Gv15s0iY2exWnguG86azU1l/YR5KEycCkUzyILyS%2bjEneQQJBhPi0ouxet1mfLp6HTZs24PUoiZsLgNc5AMgTwCJABIANPsIVt5GiawGldIq7v6cCIg0F4GVJ%2bihkRpYx7Eudk5zkdUdaGalsTqBvjNxYbhAFgiVMgO08ho0pLfS/dWuFgHsrQJ4cTcmgiYiz0mCyDOaeTZcvwt/r5PBVLMWPdkf8vMYLvZBuyYFAYHBWLXqz/jhRDz6cmeiO9eZDeTNwKWcUBaQfIvNUQ5xAURSLolDUBj6MT/AG/TKu/ArWxvsjpbikyLAVd5H15sFcE8expKkG0SyipMeKwCNq6BJqEarth2rPlkFD08PFOUVozHnNEpjtaJAY8XiImjM91MOqXrRUhnsLCHg%2bHovke6xznCuExGagesnEuDuE4RJjzyBrdu%2bgFC7Ef9IfR1C4y7McrlDZFfEZqBqCf6h/gC9eY64keuJj1K%2bhZvSRGT64SrrxUoit313jOUeWzzz7LNwmjUDL0x5UjwXGuSHXVXA7IReUTAfEsCVPGZ10lVQBRDJV1jIa%2bTVOBZVgXPlX%2bHPn/559Hc8%2bcxvcKryDCrizAKJ11pE4wLw3EH2GuFRiwfYWpPgE4QbA5QDeCzfzPoQKPdHVtLuOzNlPxGdlSkw5b2H64YYPPnsC6Pfubh5AvVb0Z3xHnmRCwbyZmKt6gxclAy%2bKf1wJFIRWsBf4iteT29F/lE9jnwDxJVdw05ZLhQVf4Ovyog5Sh42g6IALiTAFsXXMEi1KLcIwMlw169W1kN/rArjxo8TBR3nME589qGMw6hVNaEsXjeWPPcAk4HuIVHaR8ugNRFa6n4HDwOyppuZJEBFENITIsSHTrhvvGg3b1wH1C1Ha/FejJv48BjlX8Dfa2LRlz0d3XmuGMmbjn1p5XBSUjlL7oOTtBfhFOMrV5lny87eHlOnvoaNkYlILP8esU2Ak0KAp6JPJE9Jc9QD9iV23RFgzOyf112Cf4C/%2bXl2dnBwcLB4YyROF3TgeEzlzwQ4kdLIx8ctJdCWN0e8D7Cz5IFSXgksAjBUBEMVv118qIODvWife/E1oDMFxSlb6dhuTBz/CjWHYiAUueFGtrPoJQcOHMBsEoBKoZgAfVQMas0FPP9fj9wV///x0H34ZMUyJNf0wkM5TLHfL4pgzQHUBKHKIgAnw2e2Lq0ZxflHYWNrfkZgUCDefvttcRwcHIyzZRdQEq0ZzRcWEYy8KpCVWwSwFz2Bd3yWMJDz0sez/83MGYAmBMqYL8SHjhvnIIKPa8ryoZLvE8evvvoKHn74IXEcG/k5oF2AHzNnir1AqXoPL4UUz%2bak5p7Yh9BsBkVxOwIlc/HU4w/dJcSKpYuxk8LEUdon5gAuAJVBZMubxRxQLq0WZ78kSoPz1Zfg5Owo3jd%2b/Hh0tXfBx9tHPH7jrddxpqIDZTE/DYEqI%2b8ZyK6zxL%2bDRQBHqwCrLaWQC8BQOR/yqK3iQ5944nF4e3mJ48VhS7A%2bPFwch4dvwPvvvy%2bOg4KCKQ9sxI2M6RjO/wDNWavhqRwZrQLuigESANh1ApC1ANKKv2Pb3kQ89og5lB59cAIUZd/QrFPiVPaL5CXKPhyWnYRWqhfj/3hsJZqyWpGpyhoVzt3DHSPdRqxYtkI8nvTgJOiLDNDJa2n29RYBxEpg4v0BlcBA0QPGlEB7SzPkIxyxhgAXIBQJe7eY3fSxR3HkSLEYaw8%2bOBlTpkwRzxcfKcTHS5eK4xen/h7dtdG4nTWd%2boKZuJizAJLkHnhRLeezv/wgIM8oQkigBDsTCxFbfgPlp67jtVdfFu9/8P5xkB/rwpxURgL0UTgMYUFSN0qpB9BYYr90vxbnDBfw1ttvjgrgQMlvypRn8dTTT42eS5Wr0KimchinHZsDmDaxho//aG2CLGsBJzuLB7xlKYO4mfkB4%2b4cG7lZfOB9903A9xfb4e7mYkk6tmIOOF93CLK95msmTHqEtR5PgLHQkfXlO7KbuW7so5TvqJkxMl7apLXA%2b%2b9ONd9PePbJRzH5gQmjP9pt1jTEVZswWzrAfFPIY1JMbIXyBrPMPiuJqWStB88iIUZqfoatHcZTch4/cfzoM%2bztzblqzWdr0FZ0DtQhjgrAW2hzD1D9lLUEiu1wj2U5S0L8J427%2b6mnJwEEaBex6J2fW8nhenM2ClL3jr5s/OTHcbslGbpMMVEyjvjIDRDKQ4VvpVNZgWwDT2ZiN8g9YGkBoMw6hjdeegYOY2J/vD2Rnz0d6sqv4H%2bAsTlJ1BIreeW4KayO6xKqZXqeAFlFfBXaDB2Y8sKU0XuLCopFd89OzcG2zdswceJEc1l2dcFZjZgIxZmnhCfoFDwkqr6m4wcsTdBoD2BdD/D1/bnhQlfcVL8vQL%2bYRWz6zPKy8Th3fA8GG6KwYMkq/P7daZDF74egX4lvKqPwoXsge3/GTGSkpQpfZQSgcIc3JEndwpyUYSqDvYz3Am4kwseHKPb1A4jKbsReRT72KQuQeLgZCTVGSA6YKGf0M4%2bE65i9rVF4b2sLPt9bB0NilVAmNjXVrLm0FUU5xYjZE4ukxCS0Hf8S2oQTYr9/5dRVCsMXxd87%2beHJqC9pYpUJBnHmqQUe4WsDIn%2bac208cObO3gBf7496Qa5jOV/dkQcYUbmQSMbgd6%2b8AUlIGK7UJGIof4bYDZoadgG6JbidOQ19x0Ix0hyFq6XhQld2GJp3vvT9SlmjyllFvX2iSZidCOaYCCJnhJfiFhakfYu1h77HvFwgJAvwTgVmxQnwkBvJY6gT3HFRmLmpBe%2bEN7dlRtfW1ic1gIgIlQkUx3HVOJHShObsNpzKb6eSqBcTHS2EcELdAE1RJWL3xGHDhnB2sqKRlcXpcDSmzFgUXSpeR3YH53lwd5Hd2KWw2AhZxgpeCcTFUL4L6zFEYKh%2bD9CwFf1H/HArm/p99TTcyvgjF4m6PmcSYQZup/%2bR1X0xFRWfv4HL2yZ%2bEJRjXLqm8EdsP1hvTCk5wkq0Cpyq24rvWlay4U4/fNu4ivmmXWZ%2bhUdZ4CENgg4ZmH9BPfzzTjPPxAq4xhyHqzprceGBo8fL1CdQlESrPYWWlSbqUCbVMaoGIsb0%2buArQer0WHNOG%2bso7sLh2GNMulYxotqSAdm6pIHY1dKF1tnfsTzy7g2C25ZSSMTXWXsBcVGURStA9XvsJm9xc2aK6wQiTXDhK0Ohp8BJ6C12Yz2lnuwKec41recNY5e//vaZed397QEwtrsz1j6LoWMm8KUnTGe9YTzrxbpbw7D88AnMq96ORdU72MLqHVhYvRPztBFsvm4XQvWRplDdbrawaj8W66LZR9r9WKaJZSvL4/GXUhk7rKwwaqUGI/X7fNUn3Fkd6hjP/Eejyk2J65OF9K2ZSAxPbkjamPoC59eU0WYbuXLv3ZshVAbHNkNzTVQKifwIL4dElMPI1/8WUfi6H30FThjkmyM6Twx9KWFDZyUg4ky4EAhc9APOeQBfSRi%2bCwOuUft8dT2GaOYHOiRskOxIeyDbVprdF6CNYQt10QjVRrMQ3T6salFiZXMSW9ogQ9jJeMwzRLGAykgSZB%2bbr9%2bH4Ko9bJE%2bGhp1LRpST6MmpQF6RR0q5WJ548nOqEs8MXwk%2bjiUG1VQbEiJtk6yfL3SgcSwju/aDRL3A62lcICqAMcIrQt4a8w3RawbJKYj4lqBo/92tuN3vcfdznPygx1%2bBAkG2rwZu7zK1H0pVThlUKC4II7tiljHdkRsQe/FfRjumMP6OwKAsz5CZv1fz0q0McJiIhai28timwogzUphMZkKyA6mM3lxBlPXFrPdrXkIriRv0EeTp0QjTLv/VmFy%2bT5tgiGDPKCGiPPM3s/X%2bjw/NKSfRtoW9fW4NTIPK3kibm8lbhXhp3t%2bthb7G8I1wg8UFm1ktVQdMgg7yeX5PqAXdY7vkus/%2b8PHrzkMnvGdQuQHR0iE/jZfhovBqNer8OunXqVsbH%2bn1D3wG1zpVEM4542%2bdn9GAiC/4TMjCcBCK3djWaOcZRTl3dUaTxg3HhNsxyE2SYo1rSoEayKFxbWx3Bsu3bW/J6u6jwR4mmZ0GmX8eSWxmo00%2b0/z75I2pNoTYVuLCDbkEf96k9C6McoXRkTyabKPEtFf3O4eOu9/31Cn5CIuBKC31VvA1WVQKXaKBF5%2b%2bUUUHVKhs%2bUYRm61At%2bvR/8ZDzbQKXoAO1C/Fn7aGJAHsGDdHsS0FECenwZFbhqWL18%2bKoQsOxWrmpMQotltWlwXhwW6qM5cVYlD/f4Gu/15Of/2N1pn/RfJ3/ECx38hjJMt7xRvi/v/jva8bRa3zw%2b72PbXeIlhQwLo8HUQ9wATLgczQ5lc/OFvvvEGDNpDiIv6HKHzAnBSkwBcCmW93FPOzkViXTgjASim92GBPooFaiKxslUJ3Ten8M5b5pVdxPYIxF44Ckk5JUl9tInnhVBd1En%2b3uUV8bZKdSHv6S1dXZVdpcxgfzyu0j7l83RRmLxdhb9MfKwH3PUnSO7P/yAxJ0xHG3J7m6EOP1Fhin0lvg3GQLvEyLp82KXTSkx84LGfbXulJ%2b8FrixD7xkfsM65bH/tJkYhAFEASoBBut3IP6fHjPemi9cvWRSGtEuV8Kvg5KOI%2bD5TWH0CF6ucv5esLZ2zGbvPTwnQhqqATc6OAvG4cO/R/59/ZYY6JHzm7S0e8BkXYLDD3zjc4Y7eyzI897y555cn7MOVrhIM3WwGBgvZyNm5bIASpvClH4us3cL8qbwtptmXaHZCfVmHBSHzxfv8fHxRfLURAYY9PAGKHkJkjR81JHAhcvl7ydpxAe7Jh0jfEaBD4o5LgRjs9DcNnHFluLYfs2abF02x0buQr47Cx2F%2bWLRoEfvH%2bXgiP4fdbPbFpuptCNbHsMCKndjRmYeNmzeJ90y8/36kpKVCVZ6PdH0h29mSzYK1u3kIjCxpknExxDS%2boCransY29%2bxDAog5YLBT8grV%2bJHhs/7oPe3O8OM2LF%2bx6qchwJ55/h183ZbGLmpmoabARVhRuWMgtDqG4ns7k58vQbBvwM/Chl7AssoOYUmDVJin2TPyUaMUIWWR4fy9IaW77O%2b1B9haxpMJV4WuAMoDfgJZygPJbNuWcCaL3YqKonh2vkXFhv%2bWxrrPLDSeOjwT2sNeO4KqYi%2bEnYjhLi0sNsSwtNYSJs1LZdFpMhadFM827trKtkVuh7SuwOSZuR6%2b2Ztoab16tLFxT/z0ns7%2bKMzHfg24GEjdnsQ00D6XCV3%2bAn74qwnXPjHim/lGnPc1CV96GAfafVCfNyv71xeaJlHi61lYFc1d2jhfu9cUpN9jXNooM37SojSuazswsrEj07j5XM5wQHEE3BR/gUfSZytHycvN5Kks3lsRBq1h0OGnxuVA3hEODVNTZDrnD3bOx9wWf03t8VeES8G4Vu/T0faSza8ktfLnFlL2X1wbB97chNXHczfHYrIcC09Sw1MbgwX1sfDOCO9zk3/qxt9DY3uv9HWi5/mow22Cj%2b28hwJQJSDCDhYxduDWQvCGiM4Z6fj6UKd/E9kcQgQhmM7/gV2cN4lfv1a7dWKoPur35AUfkgd4UhiEkF1BWE/YTogj70ibX7Enxytt3Zv8njlpax3mJK8R3%2b2hXG3jnbrW5p5/xuSBdwmbCZ6EqYQH/909VeX%2bdv/b93imrBnt6jj5/8vPPwFwKsXSiLMoKQAAAABJRU5ErkJggg==' /%3e%3c/svg%3e" width="120" data-src="/assets/static/logo.1539b60.bd727e13501e82a0ba322b4ad29fd33a.png" data-srcset="/assets/static/logo.1539b60.bd727e13501e82a0ba322b4ad29fd33a.png 120w" data-sizes="(max-width: 120px) 100vw, 120px" class="text-ui-primary g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/logo.1539b60.bd727e13501e82a0ba322b4ad29fd33a.png" class="text-ui-primary g-image g-image--loaded" width="120"></noscript></a></div><div class="w-full px-2 sm:px-4 max-w-screen-xs"><!----></div><div class="flex items-center justify-end px-2 sm:px-4"><!----><!----><!----><div class=".clearfix" style="min-width:260px;"><a href="https://github.com/msa-ez/platform?tab=readme-ov-file#running-on-docker-compose-with-github" target="_blank" style="display:block; width:50px; height:50px; line-height:50px; float:left; padding-top: 13px;"><svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" style="margin:0 auto;"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a><div style="width:55px; height:50px; text-align:center; line-height:50px; font-weight:700; float:left;"><a style="cursor:pointer;">한국어</a></div><div style="width:50px; height:50px; text-align:center; line-height:50px; float:left; padding-top: 5px;"><button aria-label="Toggle Darkmode" title="Toggle Darkmode"><svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></button></div><div style="text-align:center; line-height:50px; float:left;"><a href="http://labs.msaez.io/" target="_blank" rel="noopener" class="px-4 py-2 ml-auto font-bold leading-none text-white rounded-lg shadow-lg bg-ui-primary">
              실습하기
            </a></div></div></div></div><div class="flex items-center justify-between -mx-2 sm:-mx-4 is-mobile"><div class="flex"><a href="/" title="Home" class="flex items-center text-ui-primary active"><img src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 120 64' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-fc641bf75e53d9efc3486e04cdc3cd6a'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-fc641bf75e53d9efc3486e04cdc3cd6a)' width='120' height='64' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAiCAYAAADvVd%2bPAAAACXBIWXMAAC4jAAAuIwF4pT92AAATw0lEQVRo3sVZCVSTZ7pmc6y22vXedqa3iz2dTje7TduZjrZWZQcBIayKC9W6dTrVUVHrUlxwAdmSEAIEJOwoCoosIQkEQVZFFitatYsdtVNHlB2S/3vm/f4kiO3M7b3n3HvMOc95v//Pv%2bR5vnf7vtjY0Kcnz0nE2PFPYGuBnQX2t3MdHURL523uwUcjrbLRyKrtCPYW2NE52wpZtS2N6ftqmwrzNebrZXfGP/tYSIrEevIcOSl789jJjoj%2b4o/pyXWyoXsm/Zjr%2bRzyX39nS1qts6uSLfBJ7g/xUg4GeycPBhECCQEEf4KE4EeY65U86EPW21s54OWlHPD0Th7woGN3Ou82V9nvNitZcEySt4Xppbol5bLqD4ngb4nI/f/d76n4mThV9hVS8dgszqgoZG/n/Q8IEjki%2bBTZN0kgD7pnGY0jaKwilNO4jb6/2p3r2i/k/0GITS/udlMDAZmAnxXquyGxQDzOAHytOHAHfgQPQorqMlpUDdAp6kACDNAP/57QQLOcR3Y3EV5KmEXj35J96Jf4cIHGWk7wEcLrBGfCQiK1qSfXMZHGJWRbyAu%2bJtvTl%2b8E42EXoNgVOOZO8AArdhPPDR50Rk%2b%2bK0z570GdoRp2VMI4N7nPSDNKGDTS7IrWh449Fb1GZ2mPyVnaa3KV9Zi8kvpMdN5E3mKi6wlklQMiPJOHhAPyU6Yqqc5IHiBUyg3QK2phSG5AnaoZJ9NOoTa1CdXKkyABhonUFbJNhINcHMISghPhd4TJd0SovsuFo1mRK/oLnIGjbkTMzWyJnOmIGwYPuaKvwAUkCCMxhJ48Z%2bOtnNnGmxl/Ikwz3s51MtF3QneuCzPm/YmVqyPhrATzSe5jRIgRebKDZPuZo2yAheSArS4BW3sc7JOjYHPTwZxl/XQ9v2ZQvIfIszl07Ev3HJQ1MJ1Uz2j2Gc06IyICETWRNZI1luzXmI5Fa4TyeD2qkupQQ%2bJwUU6qWkikFvEcF4fwN8JZwixLCNiJAhCBv3LSRGKYQIQcjdxykrfUfzL1ZU8TutXTGLk54yLcyv6QDR92Z2jYyFC7Gv15s0iY2exWnguG86azU1l/YR5KEycCkUzyILyS%2bjEneQQJBhPi0ouxet1mfLp6HTZs24PUoiZsLgNc5AMgTwCJABIANPsIVt5GiawGldIq7v6cCIg0F4GVJ%2bihkRpYx7Eudk5zkdUdaGalsTqBvjNxYbhAFgiVMgO08ho0pLfS/dWuFgHsrQJ4cTcmgiYiz0mCyDOaeTZcvwt/r5PBVLMWPdkf8vMYLvZBuyYFAYHBWLXqz/jhRDz6cmeiO9eZDeTNwKWcUBaQfIvNUQ5xAURSLolDUBj6MT/AG/TKu/ArWxvsjpbikyLAVd5H15sFcE8expKkG0SyipMeKwCNq6BJqEarth2rPlkFD08PFOUVozHnNEpjtaJAY8XiImjM91MOqXrRUhnsLCHg%2bHovke6xznCuExGagesnEuDuE4RJjzyBrdu%2bgFC7Ef9IfR1C4y7McrlDZFfEZqBqCf6h/gC9eY64keuJj1K%2bhZvSRGT64SrrxUoit313jOUeWzzz7LNwmjUDL0x5UjwXGuSHXVXA7IReUTAfEsCVPGZ10lVQBRDJV1jIa%2bTVOBZVgXPlX%2bHPn/559Hc8%2bcxvcKryDCrizAKJ11pE4wLw3EH2GuFRiwfYWpPgE4QbA5QDeCzfzPoQKPdHVtLuOzNlPxGdlSkw5b2H64YYPPnsC6Pfubh5AvVb0Z3xHnmRCwbyZmKt6gxclAy%2bKf1wJFIRWsBf4iteT29F/lE9jnwDxJVdw05ZLhQVf4Ovyog5Sh42g6IALiTAFsXXMEi1KLcIwMlw169W1kN/rArjxo8TBR3nME589qGMw6hVNaEsXjeWPPcAk4HuIVHaR8ugNRFa6n4HDwOyppuZJEBFENITIsSHTrhvvGg3b1wH1C1Ha/FejJv48BjlX8Dfa2LRlz0d3XmuGMmbjn1p5XBSUjlL7oOTtBfhFOMrV5lny87eHlOnvoaNkYlILP8esU2Ak0KAp6JPJE9Jc9QD9iV23RFgzOyf112Cf4C/%2bXl2dnBwcLB4YyROF3TgeEzlzwQ4kdLIx8ctJdCWN0e8D7Cz5IFSXgksAjBUBEMVv118qIODvWife/E1oDMFxSlb6dhuTBz/CjWHYiAUueFGtrPoJQcOHMBsEoBKoZgAfVQMas0FPP9fj9wV///x0H34ZMUyJNf0wkM5TLHfL4pgzQHUBKHKIgAnw2e2Lq0ZxflHYWNrfkZgUCDefvttcRwcHIyzZRdQEq0ZzRcWEYy8KpCVWwSwFz2Bd3yWMJDz0sez/83MGYAmBMqYL8SHjhvnIIKPa8ryoZLvE8evvvoKHn74IXEcG/k5oF2AHzNnir1AqXoPL4UUz%2bak5p7Yh9BsBkVxOwIlc/HU4w/dJcSKpYuxk8LEUdon5gAuAJVBZMubxRxQLq0WZ78kSoPz1Zfg5Owo3jd%2b/Hh0tXfBx9tHPH7jrddxpqIDZTE/DYEqI%2b8ZyK6zxL%2bDRQBHqwCrLaWQC8BQOR/yqK3iQ5944nF4e3mJ48VhS7A%2bPFwch4dvwPvvvy%2bOg4KCKQ9sxI2M6RjO/wDNWavhqRwZrQLuigESANh1ApC1ANKKv2Pb3kQ89og5lB59cAIUZd/QrFPiVPaL5CXKPhyWnYRWqhfj/3hsJZqyWpGpyhoVzt3DHSPdRqxYtkI8nvTgJOiLDNDJa2n29RYBxEpg4v0BlcBA0QPGlEB7SzPkIxyxhgAXIBQJe7eY3fSxR3HkSLEYaw8%2bOBlTpkwRzxcfKcTHS5eK4xen/h7dtdG4nTWd%2boKZuJizAJLkHnhRLeezv/wgIM8oQkigBDsTCxFbfgPlp67jtVdfFu9/8P5xkB/rwpxURgL0UTgMYUFSN0qpB9BYYr90vxbnDBfw1ttvjgrgQMlvypRn8dTTT42eS5Wr0KimchinHZsDmDaxho//aG2CLGsBJzuLB7xlKYO4mfkB4%2b4cG7lZfOB9903A9xfb4e7mYkk6tmIOOF93CLK95msmTHqEtR5PgLHQkfXlO7KbuW7so5TvqJkxMl7apLXA%2b%2b9ONd9PePbJRzH5gQmjP9pt1jTEVZswWzrAfFPIY1JMbIXyBrPMPiuJqWStB88iIUZqfoatHcZTch4/cfzoM%2bztzblqzWdr0FZ0DtQhjgrAW2hzD1D9lLUEiu1wj2U5S0L8J427%2b6mnJwEEaBex6J2fW8nhenM2ClL3jr5s/OTHcbslGbpMMVEyjvjIDRDKQ4VvpVNZgWwDT2ZiN8g9YGkBoMw6hjdeegYOY2J/vD2Rnz0d6sqv4H%2bAsTlJ1BIreeW4KayO6xKqZXqeAFlFfBXaDB2Y8sKU0XuLCopFd89OzcG2zdswceJEc1l2dcFZjZgIxZmnhCfoFDwkqr6m4wcsTdBoD2BdD/D1/bnhQlfcVL8vQL%2bYRWz6zPKy8Th3fA8GG6KwYMkq/P7daZDF74egX4lvKqPwoXsge3/GTGSkpQpfZQSgcIc3JEndwpyUYSqDvYz3Am4kwseHKPb1A4jKbsReRT72KQuQeLgZCTVGSA6YKGf0M4%2bE65i9rVF4b2sLPt9bB0NilVAmNjXVrLm0FUU5xYjZE4ukxCS0Hf8S2oQTYr9/5dRVCsMXxd87%2beHJqC9pYpUJBnHmqQUe4WsDIn%2bac208cObO3gBf7496Qa5jOV/dkQcYUbmQSMbgd6%2b8AUlIGK7UJGIof4bYDZoadgG6JbidOQ19x0Ix0hyFq6XhQld2GJp3vvT9SlmjyllFvX2iSZidCOaYCCJnhJfiFhakfYu1h77HvFwgJAvwTgVmxQnwkBvJY6gT3HFRmLmpBe%2bEN7dlRtfW1ic1gIgIlQkUx3HVOJHShObsNpzKb6eSqBcTHS2EcELdAE1RJWL3xGHDhnB2sqKRlcXpcDSmzFgUXSpeR3YH53lwd5Hd2KWw2AhZxgpeCcTFUL4L6zFEYKh%2bD9CwFf1H/HArm/p99TTcyvgjF4m6PmcSYQZup/%2bR1X0xFRWfv4HL2yZ%2bEJRjXLqm8EdsP1hvTCk5wkq0Cpyq24rvWlay4U4/fNu4ivmmXWZ%2bhUdZ4CENgg4ZmH9BPfzzTjPPxAq4xhyHqzprceGBo8fL1CdQlESrPYWWlSbqUCbVMaoGIsb0%2buArQer0WHNOG%2bso7sLh2GNMulYxotqSAdm6pIHY1dKF1tnfsTzy7g2C25ZSSMTXWXsBcVGURStA9XvsJm9xc2aK6wQiTXDhK0Ohp8BJ6C12Yz2lnuwKec41recNY5e//vaZed397QEwtrsz1j6LoWMm8KUnTGe9YTzrxbpbw7D88AnMq96ORdU72MLqHVhYvRPztBFsvm4XQvWRplDdbrawaj8W66LZR9r9WKaJZSvL4/GXUhk7rKwwaqUGI/X7fNUn3Fkd6hjP/Eejyk2J65OF9K2ZSAxPbkjamPoC59eU0WYbuXLv3ZshVAbHNkNzTVQKifwIL4dElMPI1/8WUfi6H30FThjkmyM6Twx9KWFDZyUg4ky4EAhc9APOeQBfSRi%2bCwOuUft8dT2GaOYHOiRskOxIeyDbVprdF6CNYQt10QjVRrMQ3T6salFiZXMSW9ogQ9jJeMwzRLGAykgSZB%2bbr9%2bH4Ko9bJE%2bGhp1LRpST6MmpQF6RR0q5WJ548nOqEs8MXwk%2bjiUG1VQbEiJtk6yfL3SgcSwju/aDRL3A62lcICqAMcIrQt4a8w3RawbJKYj4lqBo/92tuN3vcfdznPygx1%2bBAkG2rwZu7zK1H0pVThlUKC4II7tiljHdkRsQe/FfRjumMP6OwKAsz5CZv1fz0q0McJiIhai28timwogzUphMZkKyA6mM3lxBlPXFrPdrXkIriRv0EeTp0QjTLv/VmFy%2bT5tgiGDPKCGiPPM3s/X%2bjw/NKSfRtoW9fW4NTIPK3kibm8lbhXhp3t%2bthb7G8I1wg8UFm1ktVQdMgg7yeX5PqAXdY7vkus/%2b8PHrzkMnvGdQuQHR0iE/jZfhovBqNer8OunXqVsbH%2bn1D3wG1zpVEM4542%2bdn9GAiC/4TMjCcBCK3djWaOcZRTl3dUaTxg3HhNsxyE2SYo1rSoEayKFxbWx3Bsu3bW/J6u6jwR4mmZ0GmX8eSWxmo00%2b0/z75I2pNoTYVuLCDbkEf96k9C6McoXRkTyabKPEtFf3O4eOu9/31Cn5CIuBKC31VvA1WVQKXaKBF5%2b%2bUUUHVKhs%2bUYRm61At%2bvR/8ZDzbQKXoAO1C/Fn7aGJAHsGDdHsS0FECenwZFbhqWL18%2bKoQsOxWrmpMQotltWlwXhwW6qM5cVYlD/f4Gu/15Of/2N1pn/RfJ3/ECx38hjJMt7xRvi/v/jva8bRa3zw%2b72PbXeIlhQwLo8HUQ9wATLgczQ5lc/OFvvvEGDNpDiIv6HKHzAnBSkwBcCmW93FPOzkViXTgjASim92GBPooFaiKxslUJ3Ten8M5b5pVdxPYIxF44Ckk5JUl9tInnhVBd1En%2b3uUV8bZKdSHv6S1dXZVdpcxgfzyu0j7l83RRmLxdhb9MfKwH3PUnSO7P/yAxJ0xHG3J7m6EOP1Fhin0lvg3GQLvEyLp82KXTSkx84LGfbXulJ%2b8FrixD7xkfsM65bH/tJkYhAFEASoBBut3IP6fHjPemi9cvWRSGtEuV8Kvg5KOI%2bD5TWH0CF6ucv5esLZ2zGbvPTwnQhqqATc6OAvG4cO/R/59/ZYY6JHzm7S0e8BkXYLDD3zjc4Y7eyzI897y555cn7MOVrhIM3WwGBgvZyNm5bIASpvClH4us3cL8qbwtptmXaHZCfVmHBSHzxfv8fHxRfLURAYY9PAGKHkJkjR81JHAhcvl7ydpxAe7Jh0jfEaBD4o5LgRjs9DcNnHFluLYfs2abF02x0buQr47Cx2F%2bWLRoEfvH%2bXgiP4fdbPbFpuptCNbHsMCKndjRmYeNmzeJ90y8/36kpKVCVZ6PdH0h29mSzYK1u3kIjCxpknExxDS%2boCransY29%2bxDAog5YLBT8grV%2bJHhs/7oPe3O8OM2LF%2bx6qchwJ55/h183ZbGLmpmoabARVhRuWMgtDqG4ns7k58vQbBvwM/Chl7AssoOYUmDVJin2TPyUaMUIWWR4fy9IaW77O%2b1B9haxpMJV4WuAMoDfgJZygPJbNuWcCaL3YqKonh2vkXFhv%2bWxrrPLDSeOjwT2sNeO4KqYi%2bEnYjhLi0sNsSwtNYSJs1LZdFpMhadFM827trKtkVuh7SuwOSZuR6%2b2Ztoab16tLFxT/z0ns7%2bKMzHfg24GEjdnsQ00D6XCV3%2bAn74qwnXPjHim/lGnPc1CV96GAfafVCfNyv71xeaJlHi61lYFc1d2jhfu9cUpN9jXNooM37SojSuazswsrEj07j5XM5wQHEE3BR/gUfSZytHycvN5Kks3lsRBq1h0OGnxuVA3hEODVNTZDrnD3bOx9wWf03t8VeES8G4Vu/T0faSza8ktfLnFlL2X1wbB97chNXHczfHYrIcC09Sw1MbgwX1sfDOCO9zk3/qxt9DY3uv9HWi5/mow22Cj%2b28hwJQJSDCDhYxduDWQvCGiM4Z6fj6UKd/E9kcQgQhmM7/gV2cN4lfv1a7dWKoPur35AUfkgd4UhiEkF1BWE/YTogj70ibX7Enxytt3Zv8njlpax3mJK8R3%2b2hXG3jnbrW5p5/xuSBdwmbCZ6EqYQH/909VeX%2bdv/b93imrBnt6jj5/8vPPwFwKsXSiLMoKQAAAABJRU5ErkJggg==' /%3e%3c/svg%3e" width="120" data-src="/assets/static/logo.1539b60.bd727e13501e82a0ba322b4ad29fd33a.png" data-srcset="/assets/static/logo.1539b60.bd727e13501e82a0ba322b4ad29fd33a.png 120w" data-sizes="(max-width: 120px) 100vw, 120px" class="text-ui-primary g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/logo.1539b60.bd727e13501e82a0ba322b4ad29fd33a.png" class="text-ui-primary g-image g-image--loaded" width="120"></noscript></a><div class="w-full px-2 sm:px-4 max-w-screen-xs"><!----></div></div><div class="flex items-center justify-end px-2 sm:px-4"><!----><!----><!----><div class=".clearfix"><a href="https://github.com/msa-ez/platform?tab=readme-ov-file#running-on-docker-compose-with-github" target="_blank" style="display:block; width:50px; height:50px; line-height:50px; float:left; padding-top: 13px;"><svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" style="margin:0 auto;"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a><div style="width:55px; height:50px; text-align:center; line-height:50px; font-weight:700; float:left;"><a style="cursor:pointer;">한국어</a></div><div style="width:50px; height:50px; text-align:center; line-height:50px; float:left; padding-top: 5px;"><button aria-label="Toggle Darkmode" title="Toggle Darkmode"><svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></button></div><div style="text-align:center; line-height:50px; float:left;"><a href="http://labs.msaez.io/" target="_blank" rel="noopener" class="px-4 py-2 ml-auto font-bold leading-none text-white rounded-lg shadow-lg bg-ui-primary">
              실습하기
            </a></div></div></div></div></div></div></header><main class="container relative flex flex-wrap justify-start flex-1 w-full bg-ui-background"><!----><div class="w-full pb-24"><div class="flex flex-wrap items-start justify-start"><div class="order-2 w-full md:w-1/4 sm:pl-4 md:pl-6 lg:pl-8 sticky" style="top:4rem;"><div class="mt-8 sm:pl-4 md:pl-6 md:pt-12 lg:pl-8 sm:pb-16 sm:border-l border-ui-border md:mt-0"><h3 class="pt-0 mt-0 text-sm tracking-wide uppercase border-none">On this page</h3><div><ul><li class="font-semibold depth-2"><a href="/example-scenario/animal-hospital/#서비스-시나리오" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          서비스 시나리오
        </a></li><li class="border-t border-dashed border-ui-border pt-2 mt-2 font-semibold depth-2"><a href="/example-scenario/animal-hospital/#분석설계" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          분석/설계
        </a></li><li class="depth-3"><a href="/example-scenario/animal-hospital/#-헥사고날-아키텍처-다이어그램-도출" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          · 헥사고날 아키텍처 다이어그램 도출
        </a></li><li class="border-t border-dashed border-ui-border pt-2 mt-2 font-semibold depth-2"><a href="/example-scenario/animal-hospital/#구현" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          구현
        </a></li><li class="depth-3"><a href="/example-scenario/animal-hospital/#-ddd-의-적용" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          · DDD 의 적용
        </a></li><li class="depth-3"><a href="/example-scenario/animal-hospital/#-동기식-호출과-fallback-처리" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          · 동기식 호출과 Fallback 처리
        </a></li><li class="depth-3"><a href="/example-scenario/animal-hospital/#-클러스터-적용-후-rest-api-의-테스트" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          · 클러스터 적용 후 REST API 의 테스트
        </a></li><li class="depth-3"><a href="/example-scenario/animal-hospital/#-비동기식-호출과-eventual-consistency" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          · 비동기식 호출과 Eventual Consistency
        </a></li><li class="depth-3"><a href="/example-scenario/animal-hospital/#-api-게이트웨이" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          · API 게이트웨이
        </a></li><li class="depth-3"><a href="/example-scenario/animal-hospital/#-oauth-인증-적용" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          · Oauth 인증 적용.
        </a></li><li class="border-t border-dashed border-ui-border pt-2 mt-2 font-semibold depth-2"><a href="/example-scenario/animal-hospital/#운영" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          운영
        </a></li><li class="depth-3"><a href="/example-scenario/animal-hospital/#-cicd-설정" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          · CI/CD 설정
        </a></li><li class="depth-3"><a href="/example-scenario/animal-hospital/#-동기식-호출--서킷-브레이킹--장애격리" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          · 동기식 호출 / 서킷 브레이킹 / 장애격리
        </a></li><li class="depth-3"><a href="/example-scenario/animal-hospital/#-오토스케일-아웃" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          · 오토스케일 아웃
        </a></li><li class="depth-3"><a href="/example-scenario/animal-hospital/#-무정지-재배포" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          · 무정지 재배포
        </a></li></ul></div></div></div><div class="order-1 w-full md:w-3/4"><div class="content"><h1 id="동물병원-진료시스템"><a href="#%EB%8F%99%EB%AC%BC%EB%B3%91%EC%9B%90-%EC%A7%84%EB%A3%8C%EC%8B%9C%EC%8A%A4%ED%85%9C" aria-hidden="true"><span class="icon icon-link"></span></a>동물병원 진료시스템</h1>
<p>출처 원본: <a href="https://github.com/msa-ez/example-animal-hospital" target="_blank" rel="noopener noreferrer">https://github.com/msa-ez/example-animal-hospital</a></p>
<h3>2조 과제 - 동물병원 진료시스템 구축</h3>
<p>이 시스템은 MSA/DDD/Event Storming/EDA 를 포괄하는 분석/설계/구현/운영 전단계를 커버하도록 구성하였습니다.
이 시스템은 클라우드 네이티브 애플리케이션 Final Project 수행 테스트를 통과하기 위한 답안을 포함합니다.</p>
<h2 id="서비스-시나리오"><a href="#%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%8B%9C%EB%82%98%EB%A6%AC%EC%98%A4" aria-hidden="true"><span class="icon icon-link"></span></a>서비스 시나리오</h2>
<p><strong>기능적 요구사항</strong><br>
1. 고객은 동물병원에 예약 및 예약 취소 변경을 한다.<br>
2. 예약이 완료된 고객은 진료를 받는다. <br>
3. 수납은 고객에게 진료비를 청구한다.<br>
4. 고객이 치료비를 지불한다.<br>
5. 예약이 변경/취소되면 진료/처방이 변경/취소된다.<br>
6. 예약상태가 바뀔 때 마다 카톡으로 알림을 보낸다.<br>
7. 고객은 Lookup 시스템에서 예약 상태를 조회할 수 있다.<br></p>
<p><strong>비기능적 요구사항</strong><br>
1. 트랜잭션</p>
<ul>
<li>
<ol>
<li>진료가 불가능 할 때는 예약이 불가능해야 한다. Sync 호출</li>
</ol>
</li>
</ul>
<ol start="2">
<li>장애격리</li>
</ol>
<ul>
<li>
<ol>
<li>예약/진료 시스템(core)만 온전하면 시스템은 정상적으로 수행되어야 한다.  Async (event-driven), Eventual Consistency</li>
</ol>
</li>
<li>
<ol start="2">
<li>문자 알림, 치료비 수납 시스템에 장애가 생겨도 예약/진료 (core) 시스템은 정상적으로 작동한다.</li>
</ol>
</li>
<li>
<ol start="3">
<li>진료시스템이 과중되면 예약을 잠시후에 하도록 유도한다.  Circuit breaker, fallback</li>
</ol>
</li>
</ul>
<ol start="3">
<li>성능</li>
</ol>
<ul>
<li>
<ol>
<li>고객이 예약/진료/치료 결과를 시스템에서 확인할 수 있어야 한다.(Lookup 시스템으로 구현, CQRS)</li>
</ol>
</li>
<li>
<ol start="2">
<li>알림 시스템을 통해 예약/예약취소/예약변경 내용을 문자로 알림을 줄 수 있어야 한다. (Event driven)</li>
</ol>
</li>
</ul>
<h2 id="분석설계"><a href="#%EB%B6%84%EC%84%9D%EC%84%A4%EA%B3%84" aria-hidden="true"><span class="icon icon-link"></span></a>분석/설계</h2>
<p><strong><a href="http://msaez.io/#/storming/0vtSW2vBLoZTFiAsgdwS6H7ODs33/2dac041f4e652d598a042694dfa26b20" target="_blank" rel="noopener noreferrer">MSAEz 로 모델링한 이벤트스토밍 결과</a></strong></p>
<ul>
<li>Core Domain : 예약 (Reservation) 및 진료 (Diagnosis) 도메인</li>
<li>Supporting Domain : Lookup(CQRS) 도메인</li>
<li>General Domain : 알림(notice) 시스템.</li>
</ul>
<h3 id="-헥사고날-아키텍처-다이어그램-도출"><a href="#-%ED%97%A5%EC%82%AC%EA%B3%A0%EB%82%A0-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EB%8B%A4%EC%9D%B4%EC%96%B4%EA%B7%B8%EB%9E%A8-%EB%8F%84%EC%B6%9C" aria-hidden="true"><span class="icon icon-link"></span></a>· 헥사고날 아키텍처 다이어그램 도출</h3>
<p><img src="https://user-images.githubusercontent.com/38850007/79833622-aad4a200-83e6-11ea-80f1-6eb9a59503af.png" alt="image"></p>
<h2 id="구현"><a href="#%EA%B5%AC%ED%98%84" aria-hidden="true"><span class="icon icon-link"></span></a>구현</h2>
<p>분석/설계 단계에서 도출된 헥사고날 아키텍처에 따라, 각 BC별로 대변되는 마이크로 서비스들을 스프링부트로 구현하였다. 구현한 각 서비스를 로컬에서 실행하는 방법은 아래와 같다 (각자의 포트넘버는 8081 ~ 808n 이다)</p>
<p>동물병원 예약/진료 시스템은 아래의 7가지 마이크로 서비스로 구성되어 있다.</p>
<ol>
<li>게이트 웨이: <a href="https://github.com/AnimalHospital2/gateway.git" target="_blank" rel="noopener noreferrer">https://github.com/AnimalHospital2/gateway.git</a></li>
<li>Oauth 시스템: <a href="https://github.com/AnimalHospital2/ouath.git" target="_blank" rel="noopener noreferrer">https://github.com/AnimalHospital2/ouath.git</a></li>
<li>예약 시스템: <a href="https://github.com/AnimalHospital2/reservation.git" target="_blank" rel="noopener noreferrer">https://github.com/AnimalHospital2/reservation.git</a></li>
<li>진료 시스템: <a href="https://github.com/AnimalHospital2/diagnosis.git" target="_blank" rel="noopener noreferrer">https://github.com/AnimalHospital2/diagnosis.git</a></li>
<li>수납 시스템: <a href="https://github.com/AnimalHospital2/acceptance.git" target="_blank" rel="noopener noreferrer">https://github.com/AnimalHospital2/acceptance.git</a></li>
<li>알림 시스템: <a href="https://github.com/AnimalHospital2/notice.git" target="_blank" rel="noopener noreferrer">https://github.com/AnimalHospital2/notice.git</a></li>
</ol>
<ul>
<li>게이트웨이 시스템은 수업시간에 이용한 예제를 프로젝트에 맞게 설정을 변경하였다. </li>
<li>Oauth 시스템은 수업시간에 이용한 예제를 그대로 활용하였다.</li>
</ul>
<p>모든 시스템은 Spring Boot로 구현하였고 <code>mvn spring-boot:run</code> 명령어로 실행할 수 있다.</p>
<h3 id="-ddd-의-적용"><a href="#-ddd-%EC%9D%98-%EC%A0%81%EC%9A%A9" aria-hidden="true"><span class="icon icon-link"></span></a>· DDD 의 적용</h3>
<ul>
<li>각 서비스내에 도출된 핵심 Aggregate Root 객체를 Entity 로 선언하였다: (예시는 예약 시스템의 Reservation.class). 이때 가능한 현업에서 사용하는 언어 (유비쿼터스 랭귀지)를 그대로 사용하려고 노력했다.</li>
</ul>
<pre class="language-java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>reservation</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>reservation<span class="token punctuation">.</span>external<span class="token punctuation">.</span></span><span class="token class-name">MedicalRecord</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>reservation<span class="token punctuation">.</span>external<span class="token punctuation">.</span></span><span class="token class-name">MedicalRecordService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">JsonProcessingException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>databind<span class="token punctuation">.</span></span><span class="token class-name">ObjectMapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>messaging<span class="token punctuation">.</span></span><span class="token class-name">Processor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>messaging<span class="token punctuation">.</span></span><span class="token class-name">MessageChannel</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>messaging<span class="token punctuation">.</span></span><span class="token class-name">MessageHeaders</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>messaging<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">MessageBuilder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">MimeTypeUtils</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>persistence<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Entity</span>
<span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"RESERVATION"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Reservation</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Id</span>
    <span class="token annotation punctuation">@GeneratedValue</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> reservatorName<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> reservationDate<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> phoneNumber<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@PostPersist</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">publishReservationReservedEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">MedicalRecord</span> medicalRecord <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MedicalRecord</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        medicalRecord<span class="token punctuation">.</span><span class="token function">setReservationId</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        medicalRecord<span class="token punctuation">.</span><span class="token function">setDoctor</span><span class="token punctuation">(</span><span class="token string">"Brad pitt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        medicalRecord<span class="token punctuation">.</span><span class="token function">setMedicalOpinion</span><span class="token punctuation">(</span><span class="token string">"별 이상 없습니다."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        medicalRecord<span class="token punctuation">.</span><span class="token function">setTreatment</span><span class="token punctuation">(</span><span class="token string">"그냥 집에서 푹 쉬면 나을 것입니다."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">ReservationApplication</span><span class="token punctuation">.</span>applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">MedicalRecordService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">diagnosis</span><span class="token punctuation">(</span>medicalRecord<span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment">// Reserved 이벤트 발생</span>

        <span class="token class-name">ObjectMapper</span> objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            json <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ReservationReserved</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">JsonProcessingException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"JSON format exception"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">Processor</span> processor <span class="token operator">=</span> <span class="token class-name">ReservationApplication</span><span class="token punctuation">.</span>applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Processor</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">MessageChannel</span> outputChannel <span class="token operator">=</span> processor<span class="token punctuation">.</span><span class="token function">output</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        outputChannel<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token class-name">MessageBuilder</span>
                <span class="token punctuation">.</span><span class="token function">withPayload</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token class-name">MessageHeaders</span><span class="token punctuation">.</span><span class="token constant">CONTENT_TYPE</span><span class="token punctuation">,</span> <span class="token class-name">MimeTypeUtils</span><span class="token punctuation">.</span><span class="token constant">APPLICATION_JSON</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@PostUpdate</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">publishReservationChangedEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ObjectMapper</span> objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            json <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ReservationChanged</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">JsonProcessingException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"JSON format exception"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">Processor</span> processor <span class="token operator">=</span> <span class="token class-name">ReservationApplication</span><span class="token punctuation">.</span>applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Processor</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">MessageChannel</span> outputChannel <span class="token operator">=</span> processor<span class="token punctuation">.</span><span class="token function">output</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        outputChannel<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token class-name">MessageBuilder</span>
                <span class="token punctuation">.</span><span class="token function">withPayload</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token class-name">MessageHeaders</span><span class="token punctuation">.</span><span class="token constant">CONTENT_TYPE</span><span class="token punctuation">,</span> <span class="token class-name">MimeTypeUtils</span><span class="token punctuation">.</span><span class="token constant">APPLICATION_JSON</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@PostRemove</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">publishReservationCanceledEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ObjectMapper</span> objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            json <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ReservationCanceled</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">JsonProcessingException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"JSON format exception"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">Processor</span> processor <span class="token operator">=</span> <span class="token class-name">ReservationApplication</span><span class="token punctuation">.</span>applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Processor</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">MessageChannel</span> outputChannel <span class="token operator">=</span> processor<span class="token punctuation">.</span><span class="token function">output</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        outputChannel<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token class-name">MessageBuilder</span>
                <span class="token punctuation">.</span><span class="token function">withPayload</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token class-name">MessageHeaders</span><span class="token punctuation">.</span><span class="token constant">CONTENT_TYPE</span><span class="token punctuation">,</span> <span class="token class-name">MimeTypeUtils</span><span class="token punctuation">.</span><span class="token constant">APPLICATION_JSON</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getReservatorName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> reservatorName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setReservatorName</span><span class="token punctuation">(</span><span class="token class-name">String</span> reservatorName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>reservatorName <span class="token operator">=</span> reservatorName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getReservationDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> reservationDate<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setReservationDate</span><span class="token punctuation">(</span><span class="token class-name">String</span> reservationDate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>reservationDate <span class="token operator">=</span> reservationDate<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getPhoneNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> phoneNumber<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPhoneNumber</span><span class="token punctuation">(</span><span class="token class-name">String</span> phoneNumber<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>phoneNumber <span class="token operator">=</span> phoneNumber<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<ul>
<li>Entity Pattern 과 Repository Pattern 을 적용하여 JPA 를 통하여 다양한 데이터소스 유형 (RDB or NoSQL) 에 대한 별도의 처리가 없도록 데이터 접근 어댑터를 자동 생성하기 위하여 Spring Data REST 의 RestRepository 를 적용하였다.
RDB로는 H2를 사용하였다. </li>
</ul>
<pre class="language-java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>reservation</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>repository<span class="token punctuation">.</span></span><span class="token class-name">CrudRepository</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ReservationRepository</span> <span class="token keyword">extends</span> <span class="token class-name">CrudRepository</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Reservation</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre>
<ul>
<li>적용 후 REST API 의 테스트</li>
</ul>
<p>주의!!! reservation 서비스에는 FeignClient가 적용되어 있다. 여기에 diagnosis 시스템의 api 주소가 하드코딩되어 있어 로컬 테스트 환경과
Cloud 테스트 환경에서는 그 값을 달리하여 테스트하여야 한다.</p>
<p>package com.example.reservation.external.MedicalRecordService의 내용을 테스트 환경에 따라 변경해준다.;</p>
<ul>
<li>Local 환경 테스트시 </li>
</ul>
<pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"diagnosis"</span><span class="token punctuation">,</span> url <span class="token operator">=</span> <span class="token string">"http://localhost:8083"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">MedicalRecordService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">POST</span><span class="token punctuation">,</span> path <span class="token operator">=</span> <span class="token string">"/medicalRecords"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">diagnosis</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">MedicalRecord</span> medicalRecord<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<ul>
<li>Cloud 환경 테스트시</li>
</ul>
<pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"diagnosis"</span><span class="token punctuation">,</span> url <span class="token operator">=</span> <span class="token string">"http://diagnosis:8080"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">MedicalRecordService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">POST</span><span class="token punctuation">,</span> path <span class="token operator">=</span> <span class="token string">"/medicalRecords"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">diagnosis</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">MedicalRecord</span> medicalRecord<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>아래의 명령어는 httpie 프로그램을 사용하여 입력한다.</p>
<pre class="language-text"><code class="language-text"># 예약 서비스의 예약
http post localhost:8081/reservations reservatorName=&quot;Jackson&quot; reservationDate=&quot;2020-04-30&quot; phoneNumber=&quot;010-1234-5678&quot;

# 예약 서비스의 예약 취소
http delete localhost:8081/reservations/1

# 예약 서비스의 예약 변경
http patch localhost:8081/reservations/1 reservationDate=&quot;2020-05-01&quot;

# 진료 기록 리스트 확인
http localhost:8083/medicalRecords</code></pre>
<h3 id="-동기식-호출과-fallback-처리"><a href="#-%EB%8F%99%EA%B8%B0%EC%8B%9D-%ED%98%B8%EC%B6%9C%EA%B3%BC-fallback-%EC%B2%98%EB%A6%AC" aria-hidden="true"><span class="icon icon-link"></span></a>· 동기식 호출과 Fallback 처리</h3>
<p>분석단계에서의 조건 중 하나로 예약(reservation)->진료(diagnosis) 간의 호출은 동기식 일관성을 유지하는 트랜잭션으로 처리하기로 하였다. 호출 프로토콜은 이미 앞서 Rest Repository 에 의해 노출되어있는 REST 서비스를 FeignClient 를 이용하여 호출하도록 한다. </p>
<ul>
<li>진료서비스를 호출하기 위하여 FeignClient를 이용하여 Service 대행 인터페이스 (Proxy) 를 구현 </li>
</ul>
<pre class="language-text"><code class="language-text"># (app) 결제이력Service.java
package com.example.reservation.external;

import org.springframework.cloud.openfeign.FeignClient;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

@FeignClient(name = &quot;diagnosis&quot;, url = &quot;http://diagnosis:8080&quot;)
  public interface MedicalRecordService {

    @RequestMapping(method = RequestMethod.POST, path = &quot;/medicalRecords&quot;)
    public void diagnosis(@RequestBody MedicalRecord medicalRecord);
}</code></pre>
<ul>
<li>예약완료 직후(@PostPersist) 진단을 요청하도록 처리</li>
</ul>
<pre class="language-text"><code class="language-text"># Reservation.java (Entity)
    @PostPersist
       public void publishReservationReservedEvent() {
   
           // 예약이 발생하면 바로 진료 진행.
           MedicalRecord medicalRecord = new MedicalRecord();
   
           medicalRecord.setReservationId(this.getId());
           medicalRecord.setDoctor(&quot;Brad pitt&quot;);
           medicalRecord.setMedicalOpinion(&quot;별 이상 없습니다.&quot;);
           medicalRecord.setTreatment(&quot;그냥 집에서 푹 쉬면 나을 것입니다.&quot;);
   
           ReservationApplication.applicationContext.getBean(MedicalRecordService.class).diagnosis(medicalRecord);
   
   
           // Reserved 이벤트 발생
           ObjectMapper objectMapper = new ObjectMapper();
           String json = null;
   
           try {
               json = objectMapper.writeValueAsString(new ReservationReserved(this));
           } catch (JsonProcessingException e) {
               throw new RuntimeException(&quot;JSON format exception&quot;, e);
           }
   
           Processor processor = ReservationApplication.applicationContext.getBean(Processor.class);
           MessageChannel outputChannel = processor.output();
   
           outputChannel.send(MessageBuilder
                   .withPayload(json)
                   .setHeader(MessageHeaders.CONTENT_TYPE, MimeTypeUtils.APPLICATION_JSON)
                   .build());</code></pre>
<ul>
<li>동기식 호출에서는 호출 시간에 따른 타임 커플링이 발생하며, 진단 시스템이 장애가 나면 예약도 못받는다는 것을 확인.(비즈상 무리가 있음..) </li>
</ul>
<pre class="language-text"><code class="language-text"># 진료 (diagnosis) 서비스를 잠시 내려놓음 (ctrl+c)

# 예약 처리
http post localhost:8081/reservations reservatorName=&quot;Jackson&quot; reservationDate=&quot;2020-04-30&quot; phoneNumber=&quot;010-1234-5678&quot; #Fail

#진료 서비스 재기동
cd diagnosis
mvn spring-boot:run

#예약처리
http post localhost:8081/reservations reservatorName=&quot;Jackson&quot; reservationDate=&quot;2020-04-30&quot; phoneNumber=&quot;010-1234-5678&quot; #Success</code></pre>
<h3 id="-클러스터-적용-후-rest-api-의-테스트"><a href="#-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EC%A0%81%EC%9A%A9-%ED%9B%84-rest-api-%EC%9D%98-%ED%85%8C%EC%8A%A4%ED%8A%B8" aria-hidden="true"><span class="icon icon-link"></span></a>· 클러스터 적용 후 REST API 의 테스트</h3>
<ul>
<li><a href="http://52.231.118.148:8080/medicalRecords/" target="_blank" rel="noopener noreferrer">http://52.231.118.148:8080/medicalRecords/</a>     		//diagnosis 조회</li>
<li><a href="http://52.231.118.148:8080/reservations/" target="_blank" rel="noopener noreferrer">http://52.231.118.148:8080/reservations/</a>       		//reservation 조회 </li>
<li><a href="http://52.231.118.148:8080/reservations" target="_blank" rel="noopener noreferrer">http://52.231.118.148:8080/reservations</a> reservatorName="pdc" reservationDate="202002" phoneNumber="0103701" //reservation 요청 </li>
<li>Delete <a href="http://52.231.118.148:8080/reservations/1" target="_blank" rel="noopener noreferrer">http://52.231.118.148:8080/reservations/1</a> 	//reservation Cancel  Sample</li>
<li><a href="http://52.231.118.148:8080/reservationStats/" target="_blank" rel="noopener noreferrer">http://52.231.118.148:8080/reservationStats/</a>   	  //lookup  조회</li>
<li><a href="http://52.231.118.148:8080/financialManagements/" target="_blank" rel="noopener noreferrer">http://52.231.118.148:8080/financialManagements/</a> 	//acceptance 조회</li>
</ul>
<ul>
<li>또한 과도한 예약 요청시에 서비스 장애가 도미노 처럼 벌어질 수 있다. (서킷브레이커, 폴백 처리는 운영단계에서 설명한다.)</li>
</ul>
<h3 id="-비동기식-호출과-eventual-consistency"><a href="#-%EB%B9%84%EB%8F%99%EA%B8%B0%EC%8B%9D-%ED%98%B8%EC%B6%9C%EA%B3%BC-eventual-consistency" aria-hidden="true"><span class="icon icon-link"></span></a>· 비동기식 호출과 Eventual Consistency</h3>
<p>진료가 이루어진 후에 수납시스템으로 이를 알려주는 행위는 동기식이 아니라 비 동기식으로 처리하여 수납 시스템의 처리를 위하여 예약/진료 시스템이 블로킹 되지 않아도록 처리한다.</p>
<ul>
<li>이를 위하여 진료이력을 남긴 후에 곧바로 진료가 이루어졌다는 이벤트를를 카프카로 송출한다(Publish)</li>
</ul>
<pre class="language-text"><code class="language-text">// package Animal.Hospital.MedicalRecord;

    @PrePersist
    public void onPrePersist(){
        Treated treated = new Treated();
        BeanUtils.copyProperties(this, treated);
        treated.publish();
    }</code></pre>
<ul>
<li>수납 서비스에서는 진료완료 이벤트에 대해서 이를 수신하여 자신의 정책을 처리하도록 PolicyHandler 를 구현한다:</li>
</ul>
<pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">KafkaListener</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">FinancialManagementRepository</span> financialManagementRepository<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@StreamListener</span><span class="token punctuation">(</span><span class="token class-name">Processor</span><span class="token punctuation">.</span><span class="token constant">INPUT</span><span class="token punctuation">)</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">TreatedEvent</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Payload</span> <span class="token class-name">Treated</span> treated<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>treated<span class="token punctuation">.</span><span class="token function">getEventType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"Treated"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"수납요청 되었습니다."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">FinancialManagement</span> financialManagement <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FinancialManagement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            financialManagement<span class="token punctuation">.</span><span class="token function">setReservationId</span><span class="token punctuation">(</span>treated<span class="token punctuation">.</span><span class="token function">getReservationId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            financialManagement<span class="token punctuation">.</span><span class="token function">setFee</span><span class="token punctuation">(</span><span class="token number">10000L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            financialManagementRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>financialManagement<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>알림 시스템은 실제로 문자를 보낼 수는 없으므로, 예약/변경/취소 이벤트에 대해서 System.out.println 처리 하였다.</p>
<pre class="language-java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>notice</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">KafkaListener</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@StreamListener</span><span class="token punctuation">(</span><span class="token class-name">Processor</span><span class="token punctuation">.</span><span class="token constant">INPUT</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onReservationReservedEvent</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Payload</span> <span class="token class-name">ReservationReserved</span> reservationReserved<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>reservationReserved<span class="token punctuation">.</span><span class="token function">getEventType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"ReservationReserved"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"예약 되었습니다."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@StreamListener</span><span class="token punctuation">(</span><span class="token class-name">Processor</span><span class="token punctuation">.</span><span class="token constant">INPUT</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onReservationChangedEvent</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Payload</span> <span class="token class-name">ReservationChanged</span> reservationChanged<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>reservationChanged<span class="token punctuation">.</span><span class="token function">getEventType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"ReservationChanged"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"예약 변경 되었습니다."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@StreamListener</span><span class="token punctuation">(</span><span class="token class-name">Processor</span><span class="token punctuation">.</span><span class="token constant">INPUT</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onReservationCanceledEvent</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Payload</span> <span class="token class-name">ReservationCanceled</span> reservationCanceled<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>reservationCanceled<span class="token punctuation">.</span><span class="token function">getEventType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"ReservationCanceled"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"예약 취소 되었습니다."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>수납, Lookup(CQRS) 시스템은 예약/진료와 완전히 분리되어있으며, 이벤트 수신에 따라 처리되기 때문에, 수납/Lookup 시스템이 유지보수로 인해 잠시 내려간 상태라도 예약/진료를 하는데 문제가 없다:</p>
<pre class="language-text"><code class="language-text"># 수납 서비스 (acceptance) 를 잠시 내려놓음 (ctrl+c)

#예약처리
http post localhost:8081/reservations reservatorName=&quot;Jackson&quot; reservationDate=&quot;2020-04-30&quot; phoneNumber=&quot;010-1234-5678&quot; #Success

#예약상태 확인
http localhost:8081/reservations     # 예약 추가 된 것 확인

#수납 서비스 기동
cd acceptance
mvn spring-boot:run

#수납상태 확인
http localhost:8085/financialManagements     # 모든 예약-진료에 대해서 요금이 청구되엇음을 확인.</code></pre>
<h3 id="-api-게이트웨이"><a href="#-api-%EA%B2%8C%EC%9D%B4%ED%8A%B8%EC%9B%A8%EC%9D%B4" aria-hidden="true"><span class="icon icon-link"></span></a>· API 게이트웨이</h3>
<ul>
<li>Local 테스트 환경에서는 localhost:8080에서 Gateway API 가 작동.</li>
<li>Cloud 환경에서는 <a href="http://52.231.118.148:8080" target="_blank" rel="noopener noreferrer">http://52.231.118.148:8080</a> 에서 Gateway API가 작동.</li>
<li>application.yml 파일에 프로파일 별로 Gateway 설정.</li>
</ul>
<h3> Gateway 설정 파일</h3>
<pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8088</span>

<span class="token punctuation">---</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span> default
  <span class="token key atrule">security</span><span class="token punctuation">:</span>
    <span class="token key atrule">oauth2</span><span class="token punctuation">:</span>
      <span class="token key atrule">resourceserver</span><span class="token punctuation">:</span>
        <span class="token key atrule">jwt</span><span class="token punctuation">:</span>
          <span class="token key atrule">jwk-set-uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>8088/.well<span class="token punctuation">-</span>known/jwks.json
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> reservation
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">8081</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/reservations/<span class="token important">**</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> diagnosis
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">8083</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/medicalRecords/<span class="token important">**</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> lookup
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">8084</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/reservationStats/<span class="token important">**</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> acceptance
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">8085</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/financialManagements/<span class="token important">**</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> oauth
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">8090</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/oauth/<span class="token important">**</span>
      <span class="token key atrule">globalcors</span><span class="token punctuation">:</span>
        <span class="token key atrule">corsConfigurations</span><span class="token punctuation">:</span>
          <span class="token key atrule">'[/**]'</span><span class="token punctuation">:</span>
            <span class="token key atrule">allowedOrigins</span><span class="token punctuation">:</span>
              <span class="token punctuation">-</span> <span class="token string">"*"</span>
            <span class="token key atrule">allowedMethods</span><span class="token punctuation">:</span>
              <span class="token punctuation">-</span> <span class="token string">"*"</span>
            <span class="token key atrule">allowedHeaders</span><span class="token punctuation">:</span>
              <span class="token punctuation">-</span> <span class="token string">"*"</span>
            <span class="token key atrule">allowCredentials</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>


<span class="token punctuation">---</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span> docker
  <span class="token key atrule">security</span><span class="token punctuation">:</span>
    <span class="token key atrule">oauth2</span><span class="token punctuation">:</span>
      <span class="token key atrule">resourceserver</span><span class="token punctuation">:</span>
        <span class="token key atrule">jwt</span><span class="token punctuation">:</span>
          <span class="token key atrule">jwk-set-uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>8080/.well<span class="token punctuation">-</span>known/jwks.json
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> reservation
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//reservation<span class="token punctuation">:</span><span class="token number">8080</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/reservations/<span class="token important">**</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> diagnosis
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//diagnosis<span class="token punctuation">:</span><span class="token number">8080</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/medicalRecords/<span class="token important">**</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> lookup
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//lookup<span class="token punctuation">:</span><span class="token number">8080</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/reservationStats/<span class="token important">**</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> acceptance
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//acceptance<span class="token punctuation">:</span><span class="token number">8080</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/financialManagements/<span class="token important">**</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> oauth
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//oauth<span class="token punctuation">:</span><span class="token number">8080</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/oauth/<span class="token important">**</span>
      <span class="token key atrule">globalcors</span><span class="token punctuation">:</span>
        <span class="token key atrule">corsConfigurations</span><span class="token punctuation">:</span>
          <span class="token key atrule">'[/**]'</span><span class="token punctuation">:</span>
            <span class="token key atrule">allowedOrigins</span><span class="token punctuation">:</span>
              <span class="token punctuation">-</span> <span class="token string">"*"</span>
            <span class="token key atrule">allowedMethods</span><span class="token punctuation">:</span>
              <span class="token punctuation">-</span> <span class="token string">"*"</span>
            <span class="token key atrule">allowedHeaders</span><span class="token punctuation">:</span>
              <span class="token punctuation">-</span> <span class="token string">"*"</span>
            <span class="token key atrule">allowCredentials</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span></code></pre>
<h3 id="-oauth-인증-적용"><a href="#-oauth-%EC%9D%B8%EC%A6%9D-%EC%A0%81%EC%9A%A9" aria-hidden="true"><span class="icon icon-link"></span></a>· Oauth 인증 적용.</h3>
<ul>
<li>Oauth 인증 적용. </li>
<li>But, 수업 중에 사용한 Oauth 프로젝트를 그대로 이용하여 Gateway에 붙이기만 함.</li>
</ul>
<h2 id="운영"><a href="#%EC%9A%B4%EC%98%81" aria-hidden="true"><span class="icon icon-link"></span></a>운영</h2>
<h3 id="-cicd-설정"><a href="#-cicd-%EC%84%A4%EC%A0%95" aria-hidden="true"><span class="icon icon-link"></span></a>· CI/CD 설정</h3>
<p>각 구현체들은 각자의 Git을 통해 빌드되며, Git Master에 트리거 되어 있다. pipeline build script 는 각 프로젝트 폴더 이하에 azure_pipeline.yml 에 포함되었다.</p>
<p>azure_pipelist.yml 참고</p>
<p>kubernetes Service</p>
<pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">trigger</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> master

<span class="token key atrule">resources</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">repo</span><span class="token punctuation">:</span> self

<span class="token key atrule">variables</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">group</span><span class="token punctuation">:</span> common<span class="token punctuation">-</span>value
  <span class="token comment"># containerRegistry: 'event.azurecr.io'</span>
  <span class="token comment"># containerRegistryDockerConnection: 'acr'</span>
  <span class="token comment"># environment: 'aks.default'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> imageRepository
  <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">'order'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> dockerfilePath
  <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">'**/Dockerfile'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> tag
  <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">'$(Build.BuildId)'</span>
  <span class="token comment"># Agent VM image name</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> vmImageName
  <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">'ubuntu-latest'</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> MAVEN_CACHE_FOLDER
  <span class="token key atrule">value</span><span class="token punctuation">:</span> $(Pipeline.Workspace)/.m2/repository
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> MAVEN_OPTS
  <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">'-Dmaven.repo.local=$(MAVEN_CACHE_FOLDER)'</span>


<span class="token key atrule">stages</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">stage</span><span class="token punctuation">:</span> Build
  <span class="token key atrule">displayName</span><span class="token punctuation">:</span> Build stage
  <span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">job</span><span class="token punctuation">:</span> Build
    <span class="token key atrule">displayName</span><span class="token punctuation">:</span> Build
    <span class="token key atrule">pool</span><span class="token punctuation">:</span>
      <span class="token key atrule">vmImage</span><span class="token punctuation">:</span> $(vmImageName)
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">task</span><span class="token punctuation">:</span> CacheBeta@1
      <span class="token key atrule">inputs</span><span class="token punctuation">:</span>
        <span class="token key atrule">key</span><span class="token punctuation">:</span> <span class="token string">'maven | "$(Agent.OS)" | **/pom.xml'</span>
        <span class="token key atrule">restoreKeys</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
           maven | "$(Agent.OS)"
           maven</span>
        <span class="token key atrule">path</span><span class="token punctuation">:</span> $(MAVEN_CACHE_FOLDER)
      <span class="token key atrule">displayName</span><span class="token punctuation">:</span> Cache Maven local repo
    <span class="token punctuation">-</span> <span class="token key atrule">task</span><span class="token punctuation">:</span> Maven@3
      <span class="token key atrule">inputs</span><span class="token punctuation">:</span>
        <span class="token key atrule">mavenPomFile</span><span class="token punctuation">:</span> <span class="token string">'pom.xml'</span>
        <span class="token key atrule">options</span><span class="token punctuation">:</span> <span class="token string">'-Dmaven.repo.local=$(MAVEN_CACHE_FOLDER)'</span>
        <span class="token key atrule">javaHomeOption</span><span class="token punctuation">:</span> <span class="token string">'JDKVersion'</span>
        <span class="token key atrule">jdkVersionOption</span><span class="token punctuation">:</span> <span class="token string">'1.8'</span>
        <span class="token key atrule">jdkArchitectureOption</span><span class="token punctuation">:</span> <span class="token string">'x64'</span>
        <span class="token key atrule">goals</span><span class="token punctuation">:</span> <span class="token string">'package'</span>
    <span class="token punctuation">-</span> <span class="token key atrule">task</span><span class="token punctuation">:</span> Docker@2
      <span class="token key atrule">inputs</span><span class="token punctuation">:</span>
        <span class="token key atrule">containerRegistry</span><span class="token punctuation">:</span> $(containerRegistryDockerConnection)
        <span class="token key atrule">repository</span><span class="token punctuation">:</span> $(imageRepository)
        <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token string">'buildAndPush'</span>
        <span class="token key atrule">Dockerfile</span><span class="token punctuation">:</span> <span class="token string">'**/Dockerfile'</span>
        <span class="token key atrule">tags</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
          $(tag)</span>

<span class="token punctuation">-</span> <span class="token key atrule">stage</span><span class="token punctuation">:</span> Deploy
  <span class="token key atrule">displayName</span><span class="token punctuation">:</span> Deploy stage
  <span class="token key atrule">dependsOn</span><span class="token punctuation">:</span> Build

  <span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">deployment</span><span class="token punctuation">:</span> Deploy
    <span class="token key atrule">displayName</span><span class="token punctuation">:</span> Deploy
    <span class="token key atrule">pool</span><span class="token punctuation">:</span>
      <span class="token key atrule">vmImage</span><span class="token punctuation">:</span> $(vmImageName)
    <span class="token key atrule">environment</span><span class="token punctuation">:</span> $(environment)
    <span class="token key atrule">strategy</span><span class="token punctuation">:</span>
      <span class="token key atrule">runOnce</span><span class="token punctuation">:</span>
        <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
          <span class="token key atrule">steps</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> <span class="token key atrule">task</span><span class="token punctuation">:</span> Kubernetes@1
            <span class="token key atrule">inputs</span><span class="token punctuation">:</span>
              <span class="token key atrule">connectionType</span><span class="token punctuation">:</span> <span class="token string">'Kubernetes Service Connection'</span>
              <span class="token key atrule">namespace</span><span class="token punctuation">:</span> <span class="token string">'default'</span>
              <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token string">'apply'</span>
              <span class="token key atrule">useConfigurationFile</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
              <span class="token key atrule">configurationType</span><span class="token punctuation">:</span> <span class="token string">'inline'</span>
              <span class="token key atrule">inline</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
                apiVersion: apps/v1
                kind: Deployment
                metadata:
                  name: $(imageRepository)
                  labels:
                    app: $(imageRepository)
                spec:
                  replicas: 1
                  selector:
                    matchLabels:
                      app: $(imageRepository)
                  template:
                    metadata:
                      labels:
                        app: $(imageRepository)
                    spec:
                      containers:
                        - name: $(imageRepository)
                          image: $(containerRegistry)/$(imageRepository):$(tag)
                          ports:
                            - containerPort: 8080
                          readinessProbe:
                            httpGet:
                              path: /actuator/health
                              port: 8080
                            initialDelaySeconds: 10
                            timeoutSeconds: 2
                            periodSeconds: 5
                            failureThreshold: 10
                          livenessProbe:
                            httpGet:
                              path: /actuator/health
                              port: 8080
                            initialDelaySeconds: 120
                            timeoutSeconds: 2
                            periodSeconds: 5
                            failureThreshold: 5</span>
              <span class="token key atrule">secretType</span><span class="token punctuation">:</span> <span class="token string">'dockerRegistry'</span>
              <span class="token key atrule">containerRegistryType</span><span class="token punctuation">:</span> <span class="token string">'Azure Container Registry'</span>
          <span class="token punctuation">-</span> <span class="token key atrule">task</span><span class="token punctuation">:</span> Kubernetes@1
            <span class="token key atrule">inputs</span><span class="token punctuation">:</span>
              <span class="token key atrule">connectionType</span><span class="token punctuation">:</span> <span class="token string">'Kubernetes Service Connection'</span>
              <span class="token key atrule">namespace</span><span class="token punctuation">:</span> <span class="token string">'default'</span>
              <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token string">'apply'</span>
              <span class="token key atrule">useConfigurationFile</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
              <span class="token key atrule">configurationType</span><span class="token punctuation">:</span> <span class="token string">'inline'</span>
              <span class="token key atrule">inline</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
                apiVersion: v1
                kind: Service
                metadata:
                  name: $(imageRepository)
                  labels:
                    app: $(imageRepository)
                spec:
                  ports:
                    - port: 8080
                      targetPort: 8080
                  selector:
                    app: $(imageRepository)</span>
              <span class="token key atrule">secretType</span><span class="token punctuation">:</span> <span class="token string">'dockerRegistry'</span>
              <span class="token key atrule">containerRegistryType</span><span class="token punctuation">:</span> <span class="token string">'Azure Container Registry'</span></code></pre>
<h3 id="-동기식-호출--서킷-브레이킹--장애격리"><a href="#-%EB%8F%99%EA%B8%B0%EC%8B%9D-%ED%98%B8%EC%B6%9C--%EC%84%9C%ED%82%B7-%EB%B8%8C%EB%A0%88%EC%9D%B4%ED%82%B9--%EC%9E%A5%EC%95%A0%EA%B2%A9%EB%A6%AC" aria-hidden="true"><span class="icon icon-link"></span></a>· 동기식 호출 / 서킷 브레이킹 / 장애격리</h3>
<ul>
<li>서킷 브레이킹 프레임워크의 선택: Spring FeignClient + Hystrix 옵션을 사용하여 구현함</li>
</ul>
<p>시나리오는 예약 시스템(reservation)-->진료(diagnosis) 시의 연결을 RESTful Request/Response 로 연동하여 구현이 되어있고, 진료 요청이 과도할 경우 CB 를 통하여 장애격리.</p>
<ul>
<li>Hystrix 를 설정:  요청처리 쓰레드에서 처리시간이 610 밀리가 넘어서기 시작하여 어느정도 유지되면 CB 회로가 닫히도록 (요청을 빠르게 실패처리, 차단) 설정</li>
</ul>
<pre class="language-text"><code class="language-text"># application.yml

server:
  port: 8081
spring:
  profiles: default
  cloud:
    stream:
      kafka:
        binder:
          brokers: localhost:9092
      bindings:
        output:
          destination: animal
          contentType: application/json
feign:
  hystrix:
    enabled: true
    
    </code></pre>
<ul>
<li>피호출 서비스(진료:diagnosis) 의 임의 부하 처리 - 400 밀리에서 증감 220 밀리 정도 왔다갔다 하게</li>
</ul>
<pre class="language-text"><code class="language-text"># (diagnosis) MedicalRecord.java (Entity)

    @PrePersist
    public void onPrePersist(){  //진료이력을 저장한 후 적당한 시간 끌기
        ...
        
        try {
            Thread.currentThread().sleep((long) (400 + Math.random() * 220));
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }</code></pre>
<ul>
<li>부하테스터 siege 툴을 통한 서킷 브레이커 동작 확인:</li>
</ul>
<ul>
<li>동시사용자 100명</li>
<li>60초 동안 실시</li>
</ul>
<pre class="language-text"><code class="language-text">$ siege -c100 -t60s -r10 --content-type &quot;application/json&quot; &#39;http://localhost:8081/reservations POST {&quot;reservatorName&quot;: &quot;Jackson&quot;, &quot;phoneNumber&quot;: &quot;01032713104&quot;, &quot;reservationDate&quot;: &quot;2020-05-01&quot;}&#39;

Windows 안에서 작동하는 Ubuntu에서 siege 실행시 &quot;[error] unable to set close control sock.c:141: Invalid argument&quot; 이 발생하여 중간 과정은 알 수 없음.

그러나 아래와 같은 결과를 확인.

Lifting the server siege...
Transactions:                   1067 hits
Availability:                  78.92 %
Elapsed time:                  59.46 secs
Data transferred:               0.37 MB
Response time:                  5.36 secs
Transaction rate:              17.94 trans/sec
Throughput:                     0.01 MB/sec
Concurrency:                   96.13
Successful transactions:        1067
Failed transactions:             285
Longest transaction:            7.01
Shortest transaction:           0.02</code></pre>
<ul>
<li>운영시스템은 죽지 않고 지속적으로 CB 에 의하여 적절히 회로가 열림과 닫힘이 벌어지면서 자원을 보호하고 있음을 보여줌. 78.92% 가 성공.</li>
</ul>
<h3 id="-오토스케일-아웃"><a href="#-%EC%98%A4%ED%86%A0%EC%8A%A4%EC%BC%80%EC%9D%BC-%EC%95%84%EC%9B%83" aria-hidden="true"><span class="icon icon-link"></span></a>· 오토스케일 아웃</h3>
<p>앞서 CB 는 시스템을 안정되게 운영할 수 있게 해줬지만 사용자의 요청을 100% 받아들여주지 못했기 때문에 이에 대한 보완책으로 자동화된 확장 기능을 적용하고자 한다. </p>
<ul>
<li>진료서비스에 대한 replica 를 동적으로 늘려주도록 HPA 를 설정한다. 설정은 CPU 사용량이 15프로를 넘어서면 replica 를 10개까지 늘려준다:</li>
</ul>
<pre class="language-text"><code class="language-text">kubectl autoscale deploy diagnosis --min=1 --max=10 --cpu-percent=15</code></pre>
<h3 id="-무정지-재배포"><a href="#-%EB%AC%B4%EC%A0%95%EC%A7%80-%EC%9E%AC%EB%B0%B0%ED%8F%AC" aria-hidden="true"><span class="icon icon-link"></span></a>· 무정지 재배포</h3>
<ul>
<li>모든 프로젝트의 readiness probe 및 liveness probe 설정 완료.</li>
</ul>
<pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">readinessProbe</span><span class="token punctuation">:</span>
  <span class="token key atrule">httpGet</span><span class="token punctuation">:</span>
    <span class="token key atrule">path</span><span class="token punctuation">:</span> /actuator/health
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
  <span class="token key atrule">initialDelaySeconds</span><span class="token punctuation">:</span> <span class="token number">10</span>
  <span class="token key atrule">timeoutSeconds</span><span class="token punctuation">:</span> <span class="token number">2</span>
  <span class="token key atrule">periodSeconds</span><span class="token punctuation">:</span> <span class="token number">5</span>
  <span class="token key atrule">failureThreshold</span><span class="token punctuation">:</span> <span class="token number">10</span>
<span class="token key atrule">livenessProbe</span><span class="token punctuation">:</span>
  <span class="token key atrule">httpGet</span><span class="token punctuation">:</span>
     <span class="token key atrule">path</span><span class="token punctuation">:</span> /actuator/health
     <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
  <span class="token key atrule">initialDelaySeconds</span><span class="token punctuation">:</span> <span class="token number">120</span>
  <span class="token key atrule">timeoutSeconds</span><span class="token punctuation">:</span> <span class="token number">2</span>
  <span class="token key atrule">periodSeconds</span><span class="token punctuation">:</span> <span class="token number">5</span>
  <span class="token key atrule">failureThreshold</span><span class="token punctuation">:</span> <span class="token number">5</span></code></pre>
</div><div class="mt-8 pt-8 lg:mt-12 lg:pt-12 border-t border-ui-border"><div><div class="flex flex-col sm:flex-row justify-between items-center"><!----><!----></div></div></div></div></div></div></main></div><!----><div data-v-627a68d3><div style="width:100%; padding-bottom:30px; background-color:#1E88E5;" data-v-627a68d3><div class="flex logo-style" data-v-627a68d3><div data-v-627a68d3><img src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2170 451' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-48fe12959b04fbca758ba00b1361f424'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-48fe12959b04fbca758ba00b1361f424)' width='2170' height='451' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAANCAYAAAAZr2hsAAAACXBIWXMAAC4jAAAuIwF4pT92AAAG60lEQVRIx51WCVBURxBdFhC5FNFoxCgajCbKwi6IgkdUDvEWjcZQQhQBCYYUxioRj0jUcERLxTuaaLziiVEQjQiKhlvk8haRqKhBU4g3Qf7fyeu/s%2b5H0KTyq15N93RP/%2b6enp5RHDZ9T0HfWYXuW207dBSNH/hvmu8cdoC5RiTVe0SnsSGxZ5lXQhEbvvIi847Nue8dl9OT9Hzico1pHJaQr9BqRckGY6KRnua8hLd9/yb/L2sYExT/69th7iQFsc1c3XeHZV%2b2xdJtAvGakJ3pHtGnmPuc1CMDF6QHfhyTGeq5NGvesGWFDIFf8o0rMJOCj88zkjmllNFOgLWMtwFcgF6AGnDW8UI3Q6IEDvFVUPpkarXCq2RSkvlcK%2bj0fD3ZpEt4fQP0slfJ22XWW/Gr2fsSvb9F94zUlo5sq5WLH/FeUzd3dpt1%2bIlH1LHbg2My2%2bt/gt2PG732GkPgu4gfvDDTSDEplQwruVOt4dRKJn2iu8y5LYxpGeRPQN8BbgOPobuNy40JFDBBn0yeFGND8MKr3QYfDDwEWshsKPWbAT0jQ/J0Ngx6kB03sZV2/5ix7ae5pnYMR2IP8RPHLTal0X3uoXGesfnMc2k281pyut4nLuulT3zOkxErytjodeXMNyF/LunN3nnehBvuBMNfY1yHsQyB6INwhxMVGFOBDMybQOcdwBawfHOZC82WNta0lu2uQ9PjIMqqUjCSy5vYy1KaW5wysriZbmSlPdmybQ%2baq3HrF/bcxWMe0eYBFWq7iOve9rNvedlH/ek1cGnRuBEJucOHJ%2bTnjl11gfnGZo/U20KQYxFcZ/ywDD8Kl/30IrARiIcsrbmAgEQgAsgFrkI3UCYPI5uw/Tvmc0B/CboHxlIgXv9vyBaDXw5cA9KBLjLfsEa4gDn4Im6Fru545rW0WFRpZsmyTCy%2bJb64v7vNQ43nvSteg1hukXojq3L4nlV0jmPXOsUJl%2bxiGVNYkF7bkN1pdjNTWJcZewKI33zickvubCCcuyUr00jdcRDozC8BngLrgYP6IHl/eA4HD/MeEQNaxGiOcShGLUY/6HuSJdChfN1O/KvKkCTp2IVzG5ehf5DLIqBXSUcSc/YYM4H9inOtzO1LbKxYobXl7cJ2XaWM3Og3Znldn/FsWZx7Q0KxK3tR7sJeXNWw2gtqVl/hxuqKu21QBB6eYxV5krWYujuJ1iz4pVQpK8k/yBm%2b8/6gV8PhQi6nXb4PLATWQj7WUAHCXei583UWQC3QA3O0qzmGnRSTwO/l9BTabW7jC6oSWdWEQn6J0zdg5yfY6wsMBD2HUqW43rnN0TsdbFhpK5tJpFjUf4KmUuXfkDZ5pHb6CTXzP6jJO5Sual9/rpfNmWMDOmKJTWB89CfWoQeYRdDeWtvQfdI9uj2rwpSXGbIvVPKfhoD2xpgMLDI0QvF4M0fAmifAm/O2cJ4SpcY4iqoD6A55R%2bAZ6Flcj3a73EALF2XHboauD1EyxQdABrAD2EMJhN21ikcOjimipwPTrjFzpkVlrkEnrnuEsKgt/eqD0zXsTJ76pnDNKbW6xCmJlXdoRTomUw/kWM78jVlO3yOVr%2buCo1LwLxsaqNmU46eTYfwz0BPpigPQ/EQkQlBhPhEONUkA5pAAsQrw5MG0Ae4CQzm/m98c1B/iZZ0%2bhPoFD5gq4HzjChDKOF0N%2bZQm3fSlIsBanNPuKUtU5ucOCgi62CuS/Rg5WpiS7sS%2bS9E8ri1xuvegWFV7J1%2blZZfsFyunJcdYR56i4PfReozKv568MOZBkAN/A/MQ6EQ%2bt5mcAmZyJ9dDdg%2bYzJ0Ph84Q8JaQPQI/TF8B1Csg88DYE6Dm9Q0PPkB/c0A%2bkxLD13xFpS5LAFXELU7PA%2bqA0XSsMEbRO0WnmGgyjsXbspw%2bweKhAWFieJILC0pRP5uf4qLRmdogZbvr5Chfi893MJuQXQ/Ng/Z3pLn24Qdw1zJj/pNttENw6iOZE7j2xCMI0FrvMO0KUIB5whXQyyE3BY0GKLjqjwTm6OioACvetY8Dm6jKqFlyvbFU0ty2H5W47AiMAXbK%2bGjIr%2buao3iUEqv4WbFKcj7bd%2bIPmR8uYTHxPiwgw4lty9A8a7jsdPpBqSr7fpEqp6akd%2baZZLcHGamebPN2P%2bl6i14dLN39qIBGd7P8RYiftm7ulfi2T/%2bCk61rATjK%2bGlADRJkLGuMb3x6N/NGMDCp7jOkB8MWxSPrNeODM6cnq2tmJWuqK/Kcax6WquqqzznW3StwfFGV6/j8fkGvurrS7itI/93gjTjvIPy2NnKav9SU8h/Jn666p6gof9I2mZOt0VcWGqFA/YHu/zQqedk1qGy8RmgU6GvPYZmuIL0S/wGYLJmIlQztVAAAAABJRU5ErkJggg==' /%3e%3c/svg%3e" width="2170" data-src="/assets/static/uEngine_logo.91c82d7.d28931ee5f783778a460e9be66285c59.png" data-srcset="/assets/static/uEngine_logo.82a2fbd.d28931ee5f783778a460e9be66285c59.png 480w, /assets/static/uEngine_logo.cbab2cf.d28931ee5f783778a460e9be66285c59.png 1024w, /assets/static/uEngine_logo.91c82d7.d28931ee5f783778a460e9be66285c59.png 2170w" data-sizes="(max-width: 2170px) 100vw, 2170px" class="g-image g-image--lazy g-image--loading" data-v-627a68d3 data-v-627a68d3><noscript data-v-627a68d3 data-v-627a68d3><img src="/assets/static/uEngine_logo.91c82d7.d28931ee5f783778a460e9be66285c59.png" class="g-image g-image--loaded" width="2170"></noscript></div></div><div style="width:100%; text-align:center; font-size:14px; color:white; font-weight:300; line-height:1.5; padding-top:20px;" data-v-627a68d3><div data-v-627a68d3><div data-v-627a68d3><div class="footer-top-div" data-v-627a68d3>© MSA-Ez Authors 2024.  </div><div class="footer-top-div" data-v-627a68d3>© 2024 uEngine All rights reserved.</div></div><div data-v-627a68d3>
                    uEngine has registered trademarks and uses trademarks. and MSA-Ez is licensed under the GNU General Public License version 3.0.
                </div></div><div class="footer-bot" data-v-627a68d3><div data-v-627a68d3><a href="https://www.gnu.org/licenses/gpl-3.0.en.html#license-text" target="_blank" style="color:#fff;" data-v-627a68d3>
                        See LICENSE
                    </a>
                      |   
                </div><div data-v-627a68d3><a href="https://github.com/msa-ez/platform" target="_blank" style="color:#fff;" data-v-627a68d3>
                        Github Site
                    </a>
                      |   
                </div><div data-v-627a68d3>E-Mail: help@uengine.org</div></div></div></div></div></div>
    <script src="/assets/js/app.2d132dae.js" defer></script><script src="/assets/js/page--src-templates-markdown-page-vue.300acc31.js" defer></script>
  </body>
</html>
